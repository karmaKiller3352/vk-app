(this["webpackJsonpreact-vk-app"]=this["webpackJsonpreact-vk-app"]||[]).push([[0],{110:function(e,t,a){e.exports=a(241)},115:function(e,t,a){},116:function(e,t,a){},241:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(45),l=a.n(c),o=(a(115),a(13)),s=(a(116),a(6)),i=a(18),u=a(249),m=a(243),d=a(247);function f(){return r.a.createElement(u.a,{bg:"primary",expand:"lg",variant:"primary"},r.a.createElement(m.a,null,r.a.createElement(s.c,{className:"navbar-brand",to:"/"},r.a.createElement("img",{alt:"logo",className:"img-thumbnail",src:"/assets/img/logo.png",width:"40"})),r.a.createElement(u.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(u.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(d.a,{className:"w-100"},r.a.createElement(s.c,{className:"nav-link",to:"/",exact:!0},"Home")))))}var E=a(15),p=a.n(E),h=a(64),b=a(26),v=a(246),g=a(244),y=a(105),w=a(245),_=a(24),x=a.n(_),O=r.a.createContext(),k=["HIDDEN","FEMALE","MALE"];function j(){var e=Object(n.useContext)(O),t=e.state,a=e.dispatch;return 0!==t.length&&r.a.createElement(n.Fragment,null,r.a.createElement(g.a,{className:"mb-4"},r.a.createElement(y.a,null,r.a.createElement("h2",null,"Added Users"))),t.map((function(e){return r.a.createElement(g.a,{className:e.showFriends?"choosed user":"user",key:e.id},r.a.createElement(y.a,{md:2},r.a.createElement("img",{src:e.photo_100,alt:e.first_name})),r.a.createElement(y.a,{md:2},r.a.createElement("h3",null,e.first_name," ",e.last_name)),r.a.createElement(y.a,{md:3},r.a.createElement("p",null,r.a.createElement("b",null,"Date of Birth"),": ",e.bdate),r.a.createElement("p",null,r.a.createElement("b",null,"Gender"),": ",k[e.sex]),r.a.createElement("p",null,r.a.createElement("b",null,"Friends count"),": ",e.friendsCount||"Information closed"),r.a.createElement("p",null,r.a.createElement("b",null,"Profile"),": ",e.is_closed?"Closed":"Opened")),r.a.createElement(y.a,{md:2},r.a.createElement(v.a.Group,null,r.a.createElement(s.b,{className:"btn btn-primary",to:"/user/".concat(e.id)},"\u041f\u0435\u0440\u0435\u0439\u0442\u0438")),r.a.createElement(v.a.Group,null,r.a.createElement(w.a,{type:"button",onClick:function(){a({type:"REMOVE_USER",payload:e.id})}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"))),r.a.createElement(y.a,{md:3},r.a.createElement(v.a.Group,null,r.a.createElement(w.a,{className:"btn btn-primary",onClick:function(){a({type:"CHECK_USER",payload:e.id})}},"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0434\u0440\u0443\u0437\u0435\u0439"))))})))}var N=a(28),C=a(106),S=a.n(C),F=a(107),U=a.n(F);function A(){var e=Object(n.useContext)(O).state.filter((function(e){return e.showFriends})),t=Object(N.a)(e.map((function(e){return e.friends})).flat());t.forEach((function(e){var a=0;t.forEach((function(t){t.id===Number(e.id)&&(a+=1),e.match="mutual-".concat(a)}))}));var a=S()(U()(t,"id"),["first_name","last_name"]);return r.a.createElement(n.Fragment,null,r.a.createElement(g.a,{className:"mb-4"},r.a.createElement("h2",null,"Friend list")),a.map((function(e){var t=e.first_name,a=e.last_name,n=e.photo_50,c=e.id,l=e.match;return r.a.createElement(g.a,{key:c,className:l},r.a.createElement(y.a,{md:3},r.a.createElement(s.b,{to:"/user/".concat(c)},r.a.createElement("img",{src:n,alt:t}))),r.a.createElement(y.a,{md:8},r.a.createElement(s.b,{to:"/user/".concat(c)},t," ",a)))})))}function R(){var e=Object(n.useContext)(O),t=e.state,a=e.dispatch,c=e.requests,l=Object(n.useState)(""),s=Object(o.a)(l,2),i=s[0],u=s[1],m=Object(n.useState)(""),d=Object(o.a)(m,2),f=d[0],E=d[1];return Object(n.useEffect)((function(){function e(){return(e=Object(b.a)(p.a.mark((function e(t,n){var r,l,o,s,i,u,m,d;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,x()({method:"post",url:c.userInfo(t)});case 4:if(r=e.sent,l=r.data.response){e.next=9;break}return console.log("User with this id does not exist"),e.abrupt("return",!1);case 9:if(o=l[0],!n.every((function(e){return e.id!==o.id}))){e.next=22;break}return e.next=14,x()({method:"post",url:c.getUserFriends(o.id)});case 14:s=e.sent,i=s.data.response?s.data.response.items:[],u=i.filter((function(e){return!e.deactivated}))||[],m=u.length,d=Object(h.a)(Object(h.a)({},o),{},{friendsCount:m,friends:u,showFriends:!1}),a({type:"ADD_USER",payload:d}),e.next=23;break;case 22:console.log("This user is already on the list");case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return function(t,a){e.apply(this,arguments)}(f,t),function(){return E("")}}),[t,a,c,f]),Object(n.useEffect)((function(){localStorage.setItem("users",JSON.stringify(t))}),[t]),r.a.createElement(n.Fragment,null,r.a.createElement(v.a,{onSubmit:function(e){e.preventDefault(),E(i),u("")}},r.a.createElement(g.a,null,r.a.createElement(y.a,{md:9},r.a.createElement(v.a.Group,null,r.a.createElement(v.a.Control,{required:!0,size:"lg",type:"text",placeholder:"user id",onChange:function(e){var t=e.target.value;u(t)},value:i}),r.a.createElement(v.a.Text,{className:"text-muted"},"Enter user id"))),r.a.createElement(y.a,{md:3},r.a.createElement(v.a.Group,{align:"right"},r.a.createElement(w.a,{className:"w-100",size:"lg",variant:"primary",type:"submit"},"Submit"))))),r.a.createElement(g.a,null,r.a.createElement(y.a,null,r.a.createElement("hr",null))),r.a.createElement(g.a,{className:"userlist"},r.a.createElement(y.a,{md:9},r.a.createElement(j,null)),r.a.createElement(y.a,{md:3,className:"all-friend-list"},r.a.createElement(A,null))))}var W=a(248);var I=function(e){var t=e.data,a=t.filter((function(e){return"photo"===e.type})),c=t.filter((function(e){return"video"===e.type})),l=t.filter((function(e){return"audio"===e.type}));return r.a.createElement(n.Fragment,null,a.length>0?r.a.createElement(W.a,null,a.map((function(e){var t=e.photo,a=t.sizes,n=t.text,c=t.id;return r.a.createElement(W.a.Item,{key:c},r.a.createElement("img",{className:"d-block w-100",src:a[4].url,alt:"First slide"}),r.a.createElement(W.a.Caption,null,r.a.createElement("p",null,n)))}))):null,c.length>0||l.length>0?r.a.createElement("i",null,"Post contains audio or video. Use official VK APP"):null)};function D(e){var t=e.data,a=e.id,c=Object(n.useContext)(O).requests,l=Object(n.useState)(null),s=Object(o.a)(l,2),i=s[0],u=s[1];return Object(n.useEffect)((function(){function e(){return(e=Object(b.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x()({method:"post",url:c.userInfo(a)});case 2:if(t=e.sent,n=t.data.response){e.next=7;break}return console.log("User with this id does not exist"),e.abrupt("return",!1);case 7:console.log(n[0]),u(n[0]);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[a,c]),Object(n.useEffect)((function(){i&&(document.title="".concat(i.first_name," ").concat(i.last_name,"'s Wall"))})),!!t&&(0===t.length?r.a.createElement("h2",null,"This user hid his wall from accessing from outside"):t.map((function(e){return r.a.createElement("div",{className:"wall-post",key:e.id},r.a.createElement(g.a,{className:"post-header"},r.a.createElement(y.a,{md:2},r.a.createElement("img",{src:i.photo_100,alt:"",className:"profile-picture"})),r.a.createElement(y.a,{md:6},r.a.createElement("h5",null,i.first_name," ",i.last_name),r.a.createElement("h6",{className:"date"},new Date(1e3*e.date).toLocaleString()))),r.a.createElement(g.a,{className:"post-body"},r.a.createElement(y.a,{md:12},e.copy_history?r.a.createElement(r.a.Fragment,null,e.copy_history[0].attachments?r.a.createElement(I,{data:e.copy_history[0].attachments}):null,r.a.createElement("p",null,e.copy_history[0].text?e.copy_history[0].text:null)):null),r.a.createElement(y.a,{md:12},e.attachments?r.a.createElement(I,{data:e.attachments}):null,r.a.createElement("p",null,e.text))))})))}var T=function(e){var t=e.friends;return r.a.createElement(n.Fragment,null,t.map((function(e){var t=e.first_name,a=e.last_name,n=e.photo_100,c=e.id;return r.a.createElement(g.a,{key:c},r.a.createElement(y.a,{md:3},r.a.createElement(s.b,{to:"/user/".concat(c)},r.a.createElement("img",{src:n,alt:t}))),r.a.createElement(y.a,{md:8},r.a.createElement(s.b,{to:"/user/".concat(c)},t," ",a)))})))};function P(){var e=Object(n.useContext)(O),t=e.state,a=e.requests,c=Object(n.useState)(null),l=Object(o.a)(c,2),s=l[0],u=l[1],m=Object(i.f)().id;Object(n.useEffect)((function(){(function(){var e=Object(b.a)(p.a.mark((function e(t){var n,r,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,x()({method:"post",url:a.userWall(t)});case 4:n=e.sent,(r=n.data).error?(console.log(r.error.error_msg),u([])):(c=r.response,u(Object(N.a)(c.items)));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}})()(m)}),[m,a]);var d=t.filter((function(e){return e.friends.find((function(e){return e.id===Number(m)}))}));return m?r.a.createElement(n.Fragment,null,r.a.createElement(g.a,null,r.a.createElement(y.a,{md:9},r.a.createElement("h2",null,"User wall"),r.a.createElement("hr",null)),r.a.createElement(y.a,{md:3},r.a.createElement("h2",null,"Friends with"),r.a.createElement("hr",null))),r.a.createElement(g.a,{className:"userlist"},r.a.createElement(y.a,{md:9,className:"wall"},r.a.createElement(D,{data:s,id:m})),r.a.createElement(y.a,{md:3,className:"friends-list"},r.a.createElement(T,{friends:d})))):r.a.createElement("h2",null,"This user doesnot exist")}var G=a(50),q=a(65),L=a.n(q),H=function(e,t){switch(t.type){case"REMOVE_USER":return e.filter((function(e){return e.id!==t.payload}));case"ADD_USER":return[t.payload].concat(Object(N.a)(e));case"CHECK_USER":var a=e.find((function(e){return e.id===t.payload})),n=a.showFriends,r=e.findIndex((function(e){return e.id===t.payload})),c=L()(a,{showFriends:{$set:!n}});return L()(e,Object(G.a)({},r,{$set:c}));default:return e}},J=localStorage.getItem("users")||"[]",K=JSON.parse(J),M="4b7861134b7861134b786113794b09feea44b784b78611315d6ecd19751dc711d47446d",z={userInfo:function(e){return"/method/users.get?&user_ids=".concat(e,"&fields=photo_100,bdate,sex&access_token=").concat(M,"&v=5.89")},userWall:function(e){return"/method/wall.get?&owner_id=".concat(e,"&access_token=").concat(M,"&v=5.103")},getUserFriends:function(e){return"/method/friends.get?&user_id=".concat(e,"&order=name&fields=photo_50&access_token=").concat(M,"&v=5.89")}};var B=function(){var e=Object(n.useReducer)(H,K),t=Object(o.a)(e,2),a=t[0],c=t[1];return r.a.createElement(O.Provider,{value:{state:a,dispatch:c,ACCESS_TOKEN:M,requests:z}},r.a.createElement(s.a,null,r.a.createElement(f,null),r.a.createElement("div",{className:"container pt-4"},r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/",exact:!0,component:R}),r.a.createElement(i.a,{path:"/user/:id",component:P})))))},V=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function $(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}l.a.render(r.a.createElement(B,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");V?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):$(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):$(t,e)}))}}()}},[[110,1,2]]]);
//# sourceMappingURL=main.74bf0b3b.chunk.js.map